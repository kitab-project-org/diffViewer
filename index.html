
<html>
<head>

<meta charset="UTF-8">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">

<style>
  :root {
    --ar-chars-font-size: 16px;
  }
  body {
    font-family: 'Roboto', sans-serif;
  }
  #outputIntro {
    display: none;
  }
  #outputButtons {
    display: none;
  }
  #optionButtons {
    display: none;
  }
  textarea {
    font-family: Courier;
    font-size: var(--ar-chars-font-size);
    direction: rtl;
    border: 1px solid lightgrey;
    width: 49%;
    height: 90%;
    padding: 10px;
    resize: none;
  }

  .added {
    background-color: lightgreen;
    border-radius: 3px;
  }
  .removed {
    background-color: lightblue;
    border-radius: 3px;
  }
  .moved {
    background-color: PaleGoldenrod;
    border-radius: 3px;
  }
  #options {
    width: 95%;
    background-color: darkgrey;
    padding-left: 10px;
    padding-right: 10px;
    border-radius: 4px;
    display: none;
  }
  #inputDiv {
    display: block;
    width: 95%;
    height: 70%;
    margin-bottom: 10px;
    margin-top: 10px;
    margin-right: 0px;
  }

  input {
    font-family: 'Roboto', sans-serif;
    margin-top: 10px;
    margin-bottom: 10px;
  }

  #outputDiv {
    display: none;
    position: relative;
    margin-bottom: 10px;
    margin-top: 10px;
  }
  .resize-container {
    width: 95%;
    position: relative;
    padding: 10px;
    border: solid 1px lightgrey;
  }
  .container {
  }
  table {
    padding-right: 10px;
    padding-left: 10px;
    font-family: Courier;
    font-size: var(--ar-chars-font-size);
    border-collapse: collapse;
  }
  td{
    width: 48%;
    direction: rtl;
    padding-right: 10px;
    padding-left: 10px;
    border-left: solid 1px lightgrey;
    vertical-align: top;
  }
  td:first-child {
    border-left: solid 0px lightgrey;
  }
  #downloadDiv {
    position: absolute;
    bottom: 0;
  }
  #cDiff {
    margin: 0 auto;
    display: none;
    direction: rtl;
  }
  .num-input {
    width: 40px;
    border: solid 1px lightgrey;
    direction: rtl;
  }
  /* The Modal (background) */
  .modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    padding-top: 100px; /* Location of the box */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
  }

  /* Modal Content */
  .modal-content {
    background-color: #fefefe;
    margin: auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
  }

  /* The Close Button */
  .close {
    color: #aaaaaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
  }

  .close:hover,
  .close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
  }
  #selectRowsControls {
    display: none;
  }
  #csvTable td:first-child {
    width: 30px;
  }
  #csvTable td:nth-child(even){
    width: 3%;
  }
  #pagination {
    display: none;
  }
</style>

<script src="js/wikiEdDiff.js"></script>
<script src="js/openITI.js"></script>
<script src="js/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js" integrity="sha512-01CJ9/g7e8cUmY0DFTMcUw/ikS799FHiOA0eyHsUWfOetgbx/t6oV4otQ5zXKQyIrQGTHSmRVPIgrgLcZi/WMA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="js/index.js"></script>


</head>

<body>

<h1>OpenITI Diff viewer</h1>

<div id="inputIntro">
  <p>Paste the two strings you want to compare in the fields below (or <a id="loadExample" href="#">load an example</a>) and click the display button:</p>
</div>

<div id="outputIntro">
  <p>
    Color coding:
    <span class="removed">only in text A</span>
    <span> - </span>
    <span class="added">only in text B</span>
    <span> - </span>
    <span class="moved">in text A and B but in different position</span>
    <span> - </span>
    (not highlighted: in texts A and B)
  </p>
</div>

<div id="buttons">
  <span id="inputButtons">
    <input type="button" id="calcDiffButton" value="Display diff">
    <input type="button" id="clearButton" value="Clear">
    <input type="button" id="uploadButton" value="Upload from file">
  </span>
  <span id="outputButtons">
    <input type="button" id="svgButton" value="Download svg">
    <input type="button" id="pngButton" value="Download png">
    <input type="button" id="inputButton" value="Show input">
  </span>
  <span>
    <input type="button" name="optionsButton" id="optionsButton" value="Options">
  </span>
  <span id="optionButtons">
    <input type="button" name="resetButton" id="resetButton" value="Reset options">
  </span>
</div>

<div id="options">
  <p style="padding-top: 10px">Options:</p>
  <div style="margin-left: 20px;">
    <input type="checkbox" id="cleanCheck" name="cleanCheck" checked>
    <label for="cleanCheck">remove OpenITI tags from texts</label>
    <br>
    <input type="checkbox" id="punctCheck" name="punctCheck" checked>
    <label for="punctCheck">remove punctuation</label>
    <br>
    <label for="normalizeAlifs">Normalize: </label>
    <input type="checkbox" id="normalizeAlifCheck" name="normalizeAlifCheck" checked>
    <label for="normalizeAlif">Alifs (أ = ا = إ = آ) </label>
    <input type="checkbox" id="normalizeYaCheck" name="normalizeYaCheck" checked>
    <label for="normalizeFinalYa">alif maqṣūra / final yā' (ي = ى) </label>
    <input type="checkbox" id="normalizeHaCheck" name="normalizeHaCheck" checked>
    <label for="normalizeFinalHa">tā marbūṭa / final hā' (ة = ه)</label>
    <br>
    <label for="fontSizeInput">Font size: </label>
    <input type="text" class="num-input" id="fontSizeInput" name="fontSizeInput" value="16">
    <label for="fontSizeInput">px</label>
    <br>
    <label for="ngramInput">Refine the results using shingled character</label>
    <input type="text" class="num-input" id="ngramInput" name="ngramInput" value="3" checked>
    <label for="ngramInput">-grams</label>
    <br>
    <input type="checkbox" id="rowsCheck" name="rowsCheck">
    <label for="rowsCheck">
      divide the output into lines of max.
      <input type="text" class="num-input" id="arCharInput" name="arCharInput" value="20">
      characters for easier reading
    </label>
    <br>
    <input type="checkbox" id="singleDivCheck" name="singleDivCheck">
    <label for="singleDivCheck">Display the diff in a single composite text (wikipedia-style)</label>
  </div>
</div>

<div id="inputDiv">
  <div>
    <textarea id="inputA"></textarea>
    <textarea id="inputB"></textarea>
  </div>

</div>

<div id="outputDiv">
  <div class="resize-container">
    <div class="container">
      <table id="outputTable"></table>
    </div>
  </div>
</div>
<div id="outputSingleDiv">
  <div id="cDiff"></div>
</div>
<div id="pagination">
  <input type="button" id="prevPage" value="Previous">
  <label for="currentPageInput">Page </label>
  <input type="text" class="num-input" id="currentPageInput" name="currentPageInput">
  <label for="currentPageInput"> of </label>
  <span id="lastPageSpan"></span>
  <input type="button" id="nextPage" value="Next">
</div>

<div class="modal" id="uploadModal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <p>Choose a passim alignment file (srt, csv) to display:</p>
    <input type="file" name="inputfileButton" id="inputfileButton" accept=".csv, .tsv, .srt">
    <div id="selectRowsControls">
      <input type="button" id="loadSelectedRows" value="Load selected rows">
      <input type="button" id="selectAllRows" value="Select all">
      <input type="button" id="deselectAllRows" value="Deselect all">
      <label for="rowFilter">Filter rows: only include rows containing: </label>
      <input type="text" name="rowFilter" id="rowFilter" value="">
    </div>
    <div id="selectRows">
      <table id="csvTable"></table>
    </div>
  </div>
</div>

<div id="svgDataUrl" style="display: none"></div>
<div id="pngDataUrl" style="display: none"></div>


</body>
</html>
